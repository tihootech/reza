<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title> Test </title>

        <style media="screen">
            svg {
                border: 2px solid #555;
                cursor: crosshair;
            }
            svg > line {
                stroke: #000;
                stroke-width:3;
            }
        </style>
    </head>
    <body>

        <svg id="map" width="500" height="500">

        </svg>

        <script src="js/jquery-3.3.1.min.js"></script>

        <script type="text/javascript">

            $('#map').click(function (e){

                var elm = $(this);
                var xPos = e.pageX - elm.offset().left;
                var yPos = e.pageY - elm.offset().top;

                if ($('#map > line#new-line').length) {
                    updateLine(xPos, yPos);
                    $('#map > line#new-line').attr('id', 'line-created');
                }else {
                    $('#line-created').remove();
                    createLine(xPos, yPos);
                }

            });

            $('#map').mousemove(function(e) {

                var elm = $(this);
                var xPos = e.pageX - elm.offset().left;
                var yPos = e.pageY - elm.offset().top;

                if ($('#map > line#new-line').length) {
                    updateLine(xPos, yPos);
                }

            });

            function createLine(x, y) {
                var newLine = document.createElementNS('http://www.w3.org/2000/svg','line');
                newLine.setAttribute('id', 'new-line');
                newLine.setAttribute('x1', x);
                newLine.setAttribute('y1', y);
                newLine.setAttribute('x2', x);
                newLine.setAttribute('y2', y);
                $("#map").append(newLine);
            }

            function updateLine(x, y) {
                $('#map > line#new-line').attr('x2', x).attr('y2', y);
            }
        </script>
    </body>
</html>
